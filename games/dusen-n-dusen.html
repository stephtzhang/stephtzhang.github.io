<!DOCTYPE html>
<html>
  <head>
    <script src="https://unpkg.com/konva@7.2.5/konva.min.js"></script>
    <meta charset="utf-8" />
    <title>dusen n' dusen drawing</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background-color: #f8f8ff;
        display: flex;
      }
      .canvas {
        width: 50%;
      }
      #left {
        background-color: #f8f8ff;
      }
      #right {
        background-color: #141414;
      }

    </style>
  </head>
  <body>
    <div class="canvas" id="left"></div>
    <div class="canvas" id="right"></div>
    <script>
      const ORANGE = "#fca503";
      const BLUE = "#4287f5";
      const GREEN = "#32a852";
      const MAGENTA = "#ad3499";
      const COLORS = [ORANGE, BLUE, GREEN, MAGENTA];

      function getRandomInt(min, max) {
        min = Math.ceil(min);
        max = Math.floor(max);
        //The maximum is exclusive and the minimum is inclusive
        return Math.floor(Math.random() * (max - min) + min);
      }

      function getRandomElement(array) {
        return array[Math.floor(Math.random() * array.length)];
      }

      function makeRandomBox(x, y) {
        return new Konva.Rect({
          x: x,
          y: y,
          width: getRandomInt(100, 300),
          height: getRandomInt(100, 300),
          fill: getRandomElement(COLORS),
          draggable: true,
        });
      }

      function makeRandomPolygon(x, y) {
        return new Konva.RegularPolygon({
          x: x,
          y: y,
          sides: 6,
          radius: getRandomInt(100, 200),
          fill: getRandomElement(COLORS),
          draggable: true,
        });
      }

      function makeRandomCircle(x, y) {
        return new Konva.Circle({
          x: x,
          y: y,
          radius: getRandomInt(100, 200),
          fill: getRandomElement(COLORS),
          draggable: true,
        });
      }

      function makeShape(x, y ) {
        var shapeFuncs = [makeRandomPolygon, makeRandomBox, makeRandomCircle];
        var shapeFunc = getRandomElement(shapeFuncs);
        var shape = shapeFunc(x, y)

        // add cursor styling
        shape.on('mouseover', function () {
          document.body.style.cursor = 'pointer';
        });
        shape.on('mouseout', function () {
          document.body.style.cursor = 'default';
        });

        return shape;
      }

      // // // // // //
      // LEFT HERE. //
      // // // // // //

      var CONTAINER_WIDTH = window.innerWidth / 2;
      var CONTAINER_HEIGHT = window.innerHeight;

      var leftStage = new Konva.Stage({
        container: 'left',
        width: CONTAINER_WIDTH,
        height: CONTAINER_HEIGHT,
      });

      var leftLayer = new Konva.Layer();

      function dropLeftShape(event) {
        var shape = makeShape(event.clientX, event.clientY);
        leftLayer.add(shape);
        leftStage.add(leftLayer);
      }

      document.getElementById('left').addEventListener(
        'dblclick',
        dropLeftShape,
      );

      // // // // // //
      // RIGHT HERE. //
      // // // // // //
      var rightStage = new Konva.Stage({
        container: 'right',
        width: CONTAINER_WIDTH,
        height: CONTAINER_HEIGHT,
      });

      var rightLayer = new Konva.Layer();


      function dropRightShape(event) {
        var shape = makeShape(event.clientX - CONTAINER_WIDTH, event.clientY);
        rightLayer.add(shape);
        rightStage.add(rightLayer);
      }

      document.getElementById('right').addEventListener(
        'dblclick',
        dropRightShape,
      );
    </script>
  </body>
</html>