<!DOCTYPE html>
<html>
  <head>
    <script src="https://unpkg.com/konva@7.2.5/konva.min.js"></script>
    <meta charset="utf-8" />
    <title>dusen n' dusen drawing</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background-color: #f8f8ff;
        display: flex;
      }
      .canvas {
        width: 50%;
      }
      #left {
        background-color: #fcfbc2;
      }
      #right {
        background-color: #6abd7e;
      }

    </style>
  </head>
  <body>
    <div class="canvas" id="left"></div>
    <div class="canvas" id="right"></div>
    <script>
      const ORANGE = "#fca503";
      const BLUE = "#4287f5";
      const GREEN = "#32a852";
      const MAGENTA = "#ad3499";
      const COLORS = [ORANGE, BLUE, GREEN, MAGENTA];

      function getRandomInt(min, max) {
        min = Math.ceil(min);
        max = Math.floor(max);
        //The maximum is exclusive and the minimum is inclusive
        return Math.floor(Math.random() * (max - min) + min);
      }

      function getRandomElement(array) {
        return array[Math.floor(Math.random() * array.length)];
      }

      // // // // // //
      // LEFT HERE. //
      // // // // // //

      var width = window.innerWidth / 2;
      var height = window.innerHeight;

      var stage = new Konva.Stage({
        container: 'left',
        width: width,
        height: height,
      });

      var layer = new Konva.Layer();

      function makeRandomBox(x, y) {
        return new Konva.Rect({
          x: event.clientX,
          y: event.clientY,
          width: getRandomInt(100, 300),
          height: getRandomInt(100, 300),
          fill: getRandomElement(COLORS),
          draggable: true,
        });
      }

      function makeRandomPolygon(x, y) {
        return new Konva.RegularPolygon({
          x: event.clientX,
          y: event.clientY,
          sides: 6,
          radius: getRandomInt(100, 200),
          fill: getRandomElement(COLORS),
          draggable: true,
        });
      }

      function makeRandomCircle(x, y) {
        return new Konva.Circle({
          x: event.clientX,
          y: event.clientY,
          radius: getRandomInt(100, 200),
          fill: getRandomElement(COLORS),
          draggable: true,
        });
      }

      function dropShape(event) {
        var shapeFuncs = [makeRandomPolygon, makeRandomBox, makeRandomCircle];
        var shapeFunc = getRandomElement(shapeFuncs);
        var shape = shapeFunc(event.clientX, event.clientY)

        // add cursor styling
        shape.on('mouseover', function () {
          document.body.style.cursor = 'pointer';
        });
        shape.on('mouseout', function () {
          document.body.style.cursor = 'default';
        });

        layer.add(shape);
        stage.add(layer);
      }

      document.getElementById('left').addEventListener(
        'dblclick',
        dropShape,
      );

      // // // // // //
      // RIGHT HERE. //
      // // // // // //
      // var width = window.innerWidth / 2;
      // var height = window.innerHeight;

      // var stage = new Konva.Stage({
      //   container: 'right',
      //   width: width,
      //   height: height,
      // });

      // var layer = new Konva.Layer();
      // var rectX = stage.width() / 2 - 50;
      // var rectY = stage.height() / 2 - 25;

      // var box = new Konva.Rect({
      //   x: rectX,
      //   y: rectY,
      //   width: 100,
      //   height: 50,
      //   fill: '#00D2FF',
      //   stroke: 'black',
      //   strokeWidth: 4,
      //   draggable: true,
      // });

      // // add cursor styling
      // box.on('mouseover', function () {
      //   document.body.style.cursor = 'pointer';
      // });
      // box.on('mouseout', function () {
      //   document.body.style.cursor = 'default';
      // });

      // layer.add(box);
      // stage.add(layer);
    </script>
  </body>
</html>